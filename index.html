<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZerX - 30-Day Development Plan</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #fafafa;
            --bg-tertiary: #f5f5f5;
            --text-primary: #000000;
            --text-secondary: #666666;
            --text-muted: #999999;
            --border-light: #e8e8e8;
            --border-medium: #d0d0d0;
            --border-strong: #000000;
            --shadow-light: rgba(0, 0, 0, 0.05);
            --shadow-medium: rgba(0, 0, 0, 0.1);
            --shadow-strong: rgba(0, 0, 0, 0.15);
            --radius-sm: 6px;
            --radius-md: 12px;
            --radius-lg: 20px;
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;
            --spacing-2xl: 48px;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.5;
            font-weight: 400;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .container {
            max-width: 1440px;
            margin: 0 auto;
            background: var(--bg-primary);
            min-height: 100vh;
            box-shadow: 0 0 60px var(--shadow-light);
        }

        .header {
            background: var(--text-primary);
            color: var(--bg-primary);
            padding: var(--spacing-2xl) var(--spacing-xl);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, transparent 0%, rgba(255,255,255,0.02) 50%, transparent 100%);
            pointer-events: none;
        }

        .header h1 {
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 800;
            letter-spacing: -0.05em;
            margin-bottom: var(--spacing-sm);
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 1.1rem;
            font-weight: 300;
            letter-spacing: 0.1em;
            opacity: 0.9;
            text-transform: uppercase;
            position: relative;
            z-index: 1;
        }

        .tabs {
            display: flex;
            background: var(--bg-primary);
            border-bottom: 1px solid var(--border-light);
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.95);
        }

        .tabs::-webkit-scrollbar {
            display: none;
        }

        .tab {
            padding: var(--spacing-lg) var(--spacing-xl);
            cursor: pointer;
            border: none;
            background: transparent;
            font-size: 0.875rem;
            font-weight: 500;
            color: var(--text-secondary);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            white-space: nowrap;
            min-width: 140px;
            position: relative;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .tab::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%) scaleX(0);
            width: 80%;
            height: 2px;
            background: var(--text-primary);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .tab:hover {
            color: var(--text-primary);
            background: var(--bg-tertiary);
        }

        .tab.active {
            color: var(--text-primary);
            font-weight: 600;
        }

        .tab.active::after {
            transform: translateX(-50%) scaleX(1);
        }

        .tab-content {
            display: none;
            padding: var(--spacing-2xl);
            animation: fadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-xl);
            padding-bottom: var(--spacing-lg);
            border-bottom: 1px solid var(--border-light);
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            letter-spacing: -0.02em;
        }

        .table-container {
            overflow: hidden;
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-light);
            background: var(--bg-primary);
            box-shadow: 0 4px 24px var(--shadow-light);
        }

        .table-wrapper {
            overflow-x: auto;
            overflow-y: auto;
            max-height: 70vh;
            scrollbar-width: thin;
            scrollbar-color: var(--border-medium) transparent;
        }

        .table-wrapper::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        .table-wrapper::-webkit-scrollbar-track {
            background: transparent;
        }

        .table-wrapper::-webkit-scrollbar-thumb {
            background: var(--border-medium);
            border-radius: 3px;
        }

        .table-wrapper::-webkit-scrollbar-thumb:hover {
            background: var(--text-secondary);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-primary);
        }

        th {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            padding: var(--spacing-lg) var(--spacing-md);
            text-align: left;
            font-weight: 600;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            position: sticky;
            top: 0;
            z-index: 10;
            border-bottom: 1px solid var(--border-light);
        }

        td {
            padding: var(--spacing-md);
            border-bottom: 1px solid var(--border-light);
            vertical-align: top;
            transition: background-color 0.2s ease;
        }

        tr:hover td {
            background: var(--bg-secondary);
        }

        .status-checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: var(--text-primary);
            border-radius: var(--radius-sm);
            transition: all 0.2s ease;
        }

        .status-checkbox:hover {
            transform: scale(1.1);
        }

        .week-header {
            background: var(--text-primary);
            color: var(--bg-primary);
        }

        .week-header td {
            padding: var(--spacing-lg);
            font-size: 0.875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .day-cell {
            font-weight: 700;
            min-width: 80px;
            text-align: center;
            font-size: 0.875rem;
            background: var(--bg-secondary);
        }

        .goal-cell {
            min-width: 200px;
            font-weight: 500;
            font-size: 0.875rem;
        }

        .tasks-cell {
            min-width: 350px;
            line-height: 1.6;
            font-size: 0.8rem;
        }

        .tasks-cell ul {
            margin: 0;
            padding-left: var(--spacing-lg);
        }

        .tasks-cell li {
            margin-bottom: var(--spacing-xs);
            position: relative;
        }

        .tasks-cell li::marker {
            color: var(--text-secondary);
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--spacing-xl);
            margin-bottom: var(--spacing-2xl);
        }

        .metric-card {
            background: var(--bg-primary);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            text-align: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 12px var(--shadow-light);
        }

        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--text-primary);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .metric-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 32px var(--shadow-medium);
            border-color: var(--text-primary);
        }

        .metric-card:hover::before {
            transform: scaleX(1);
        }

        .metric-value {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: var(--spacing-sm);
            letter-spacing: -0.02em;
        }

        .metric-label {
            color: var(--text-secondary);
            font-weight: 500;
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--border-light);
            border-radius: 4px;
            overflow: hidden;
            margin: var(--spacing-md) 0;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--text-primary) 0%, var(--text-secondary) 100%);
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 4px;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .form-control, input[type="text"], input[type="date"], select, textarea {
            width: 100%;
            padding: var(--spacing-sm) var(--spacing-md);
            border: 1px solid var(--border-medium);
            border-radius: var(--radius-sm);
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 0.875rem;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: inherit;
        }

        .form-control:focus, input[type="text"]:focus, input[type="date"]:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--text-primary);
            box-shadow: 0 0 0 3px rgba(0, 0, 0, 0.1);
            transform: translateY(-1px);
        }

        .btn {
            background: var(--text-primary);
            color: var(--bg-primary);
            border: 1px solid var(--text-primary);
            padding: var(--spacing-md) var(--spacing-xl);
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-weight: 500;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            font-family: inherit;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .btn:hover {
            background: var(--bg-primary);
            color: var(--text-primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 16px var(--shadow-medium);
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-small {
            padding: var(--spacing-xs) var(--spacing-md);
            font-size: 0.75rem;
        }

        .btn-secondary {
            background: var(--bg-primary);
            color: var(--text-primary);
            border: 1px solid var(--border-medium);
        }

        .btn-secondary:hover {
            background: var(--text-primary);
            color: var(--bg-primary);
            border-color: var(--text-primary);
        }

        .save-indicator {
            position: fixed;
            top: var(--spacing-lg);
            right: var(--spacing-lg);
            background: var(--text-primary);
            color: var(--bg-primary);
            padding: var(--spacing-md) var(--spacing-lg);
            border-radius: var(--radius-md);
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateX(120%) scale(0.8);
            opacity: 0;
            z-index: 1000;
            box-shadow: 0 8px 32px var(--shadow-strong);
        }

        .save-indicator.show {
            transform: translateX(0) scale(1);
            opacity: 1;
        }

        .stats-summary {
            background: var(--bg-primary);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-lg);
            padding: var(--spacing-xl);
            margin-bottom: var(--spacing-xl);
            box-shadow: 0 2px 12px var(--shadow-light);
        }

        .stats-summary h3 {
            margin-bottom: var(--spacing-lg);
            color: var(--text-primary);
            font-weight: 700;
            font-size: 1.125rem;
            letter-spacing: -0.02em;
        }

        .stats-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
            padding: var(--spacing-sm) 0;
            border-bottom: 1px solid var(--border-light);
            font-size: 0.875rem;
        }

        .stats-row:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .stats-row span:first-child {
            color: var(--text-secondary);
            font-weight: 500;
        }

        .stats-row span:last-child {
            color: var(--text-primary);
            font-weight: 600;
        }

        .priority-high { 
            color: var(--text-primary); 
            font-weight: 700;
            position: relative;
        }

        .priority-high::before {
            content: '●';
            margin-right: var(--spacing-xs);
            color: var(--text-primary);
        }

        .priority-medium { 
            color: var(--text-secondary); 
            font-weight: 600;
        }

        .priority-medium::before {
            content: '●';
            margin-right: var(--spacing-xs);
            color: var(--text-secondary);
        }

        .priority-low { 
            color: var(--text-muted); 
            font-weight: 400;
        }

        .priority-low::before {
            content: '●';
            margin-right: var(--spacing-xs);
            color: var(--text-muted);
        }

        .stage-badge {
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            display: inline-block;
        }

        .stage-new { 
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            border: 1px solid var(--border-medium);
        }

        .stage-contact { 
            background: var(--text-primary);
            color: var(--bg-primary);
        }

        .stage-work { 
            background: var(--text-primary);
            color: var(--bg-primary);
            font-weight: 700;
        }

        .stage-done { 
            background: var(--bg-primary);
            color: var(--text-primary);
            border: 2px solid var(--text-primary);
            font-weight: 700;
        }

        .action-buttons {
            display: flex;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
        }

        .glass-effect {
            backdrop-filter: blur(20px);
            background: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .floating-add-btn {
            position: fixed;
            bottom: var(--spacing-xl);
            right: var(--spacing-xl);
            width: 60px;
            height: 60px;
            background: var(--text-primary);
            color: var(--bg-primary);
            border: none;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 8px 32px var(--shadow-strong);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 999;
        }

        .floating-add-btn:hover {
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 12px 48px var(--shadow-strong);
        }

        .cloud-setup-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            backdrop-filter: blur(10px);
        }

        .cloud-setup-content {
            background: var(--bg-primary);
            border: 2px solid var(--text-primary);
            border-radius: var(--radius-lg);
            padding: var(--spacing-2xl);
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .cloud-setup-content h3 {
            margin-bottom: var(--spacing-lg);
            color: var(--text-primary);
            font-weight: 700;
        }

        .cloud-options {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
            margin: var(--spacing-lg) 0;
        }

        .cloud-option {
            padding: var(--spacing-lg);
            border: 1px solid var(--border-medium);
            border-radius: var(--radius-sm);
            background: var(--bg-primary);
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
        }

        .cloud-option:hover {
            border-color: var(--text-primary);
            transform: translateY(-2px);
        }

        .cloud-option strong {
            display: block;
            color: var(--text-primary);
            margin-bottom: var(--spacing-xs);
        }

        .cloud-option small {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .sync-status {
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-local {
            background: var(--bg-tertiary);
            color: var(--text-secondary);
        }

        .status-synced {
            background: var(--text-primary);
            color: var(--bg-primary);
        }

        .status-pending {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--text-primary);
        }

        .status-error {
            background: var(--bg-primary);
            color: var(--text-primary);
            border: 1px solid var(--text-primary);
            text-decoration: line-through;
        }

        .sync-info {
            background: var(--bg-secondary);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-sm);
            padding: var(--spacing-md);
            margin-bottom: var(--spacing-lg);
            font-size: 0.875rem;
        }

        .sync-actions {
            display: flex;
            gap: var(--spacing-sm);
            margin-top: var(--spacing-md);
            flex-wrap: wrap;
        }

        @media (max-width: 768px) {
            .container {
                margin: 0;
                border-radius: 0;
            }
            
            .header {
                padding: var(--spacing-xl) var(--spacing-lg);
            }
            
            .tabs {
                flex-wrap: wrap;
            }
            
            .tab {
                flex: 1;
                min-width: 100px;
                padding: var(--spacing-md) var(--spacing-sm);
                font-size: 0.75rem;
            }
            
            .tab-content {
                padding: var(--spacing-lg);
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
                gap: var(--spacing-lg);
            }

            .metric-card {
                padding: var(--spacing-lg);
            }

            .floating-add-btn {
                bottom: var(--spacing-lg);
                right: var(--spacing-lg);
                width: 50px;
                height: 50px;
                font-size: 20px;
            }

            .action-buttons {
                flex-direction: column;
            }

            .table-wrapper {
                max-height: 60vh;
            }

            .cloud-setup-content {
                padding: var(--spacing-lg);
                margin: var(--spacing-md);
            }

            .sync-actions {
                flex-direction: column;
            }
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <div class="save-indicator" id="saveIndicator">
        СОХРАНЕНО
    </div>

    <div class="container">
        <div class="header">
            <h1>ZerX</h1>
            <p>30-Day Development Plan Tracker</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('plan')">План</button>
            <button class="tab" onclick="showTab('portfolio')">Портфолио</button>
            <button class="tab" onclick="showTab('ideas')">Идеи</button>
            <button class="tab" onclick="showTab('marketing')">Маркетинг</button>
            <button class="tab" onclick="showTab('clients')">Клиенты</button>
            <button class="tab" onclick="showTab('dashboard')">Дашборд</button>
        </div>

        <!-- План -->
        <div id="plan" class="tab-content active">
            <div class="table-container">
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>День</th>
                                <th>Дата</th>
                                <th>Цель дня</th>
                                <th>Задачи</th>
                                <th>Статус</th>
                                <th>Заметки</th>
                            </tr>
                        </thead>
                        <tbody id="planTableBody">
                            <!-- Неделя 1 -->
                            <tr class="week-header">
                                <td colspan="6">Неделя 1: Старт и база</td>
                            </tr>
                            <tr data-task="task-1">
                                <td class="day-cell">1-2</td>
                                <td><input type="date" data-field="date" onchange="saveTaskData(this)"></td>
                                <td class="goal-cell">Определение ниши + позиционирование</td>
                                <td class="tasks-cell">
                                    <ul>
                                        <li>Выбрать 2-3 целевых сегмента (малый бизнес, кафе, репетиторы)</li>
                                        <li>Сформулировать УТП: «Telegram/VK-боты и сайты под ключ за 2-5 дней»</li>
                                    </ul>
                                </td>
                                <td><input type="checkbox" class="status-checkbox" data-field="completed" onchange="saveTaskData(this)"></td>
                                <td><input type="text" placeholder="Заметки..." data-field="notes" onchange="saveTaskData(this)"></td>
                            </tr>
                            <tr data-task="task-2">
                                <td class="day-cell">3-4</td>
                                <td><input type="date" data-field="date" onchange="saveTaskData(this)"></td>
                                <td class="goal-cell">Подготовка инфраструктуры</td>
                                <td class="tasks-cell">
                                    <ul>
                                        <li>Создать Telegram-канал и группу ВК</li>
                                        <li>Создать простую страницу о себе (Notion/Tilda)</li>
                                        <li>Установить шаблон бота (aiogram)</li>
                                        <li>Подготовить шаблон лендинга</li>
                                    </ul>
                                </td>
                                <td><input type="checkbox" class="status-checkbox" data-field="completed" onchange="saveTaskData(this)"></td>
                                <td><input type="text" placeholder="Заметки..." data-field="notes" onchange="saveTaskData(this)"></td>
                            </tr>
                            <tr data-task="task-3">
                                <td class="day-cell">5-7</td>
                                <td><input type="date" data-field="date" onchange="saveTaskData(this)"></td>
                                <td class="goal-cell">Портфолио-проекты – 1 партия (простые)</td>
                                <td class="tasks-cell">
                                    <ul>
                                        <li>Telegram-бот №1: Меню для кафе (меню, заказ, оплата)</li>
                                        <li>VK-бот №1: Бот для школы/курсов (расписание, уведомления)</li>
                                        <li>Лендинг №1: Услуги сантехника/электрика с формой заявки</li>
                                    </ul>
                                </td>
                                <td><input type="checkbox" class="status-checkbox" data-field="completed" onchange="saveTaskData(this)"></td>
                               <td><input type="text" placeholder="Заметки..." data-field="notes" onchange="saveTaskData(this)"></td>
                           </tr>

                           <!-- Неделя 2 -->
                           <tr class="week-header">
                               <td colspan="6">Неделя 2: Прокачка + создание упаковки</td>
                           </tr>
                           <tr data-task="task-4">
                               <td class="day-cell">8-9</td>
                               <td><input type="date" data-field="date" onchange="saveTaskData(this)"></td>
                               <td class="goal-cell">Тест и доработка портфолио</td>
                               <td class="tasks-cell">
                                   <ul>
                                       <li>Отшлифовать UI (кнопки, сообщения, формы, вёрстку)</li>
                                       <li>Добавить 1-2 крутых фичи в каждый проект</li>
                                       <li>Генерация PDF счета, WebApp внутри Telegram</li>
                                   </ul>
                               </td>
                               <td><input type="checkbox" class="status-checkbox" data-field="completed" onchange="saveTaskData(this)"></td>
                               <td><input type="text" placeholder="Заметки..." data-field="notes" onchange="saveTaskData(this)"></td>
                           </tr>
                           <tr data-task="task-5">
                               <td class="day-cell">10-12</td>
                               <td><input type="date" data-field="date" onchange="saveTaskData(this)"></td>
                               <td class="goal-cell">Оформление</td>
                               <td class="tasks-cell">
                                   <ul>
                                       <li>Загрузить ботов на GitHub с README</li>
                                       <li>Создать лендинг-портфолио со скриншотами</li>
                                       <li>Создать визуальный гайд (логотип, шрифты, стиль)</li>
                                   </ul>
                               </td>
                               <td><input type="checkbox" class="status-checkbox" data-field="completed" onchange="saveTaskData(this)"></td>
                               <td><input type="text" placeholder="Заметки..." data-field="notes" onchange="saveTaskData(this)"></td>
                           </tr>
                           <tr data-task="task-6">
                               <td class="day-cell">13-14</td>
                               <td><input type="date" data-field="date" onchange="saveTaskData(this)"></td>
                               <td class="goal-cell">Портфолио-проекты – 2 партия (средний уровень)</td>
                               <td class="tasks-cell">
                                   <ul>
                                       <li>Telegram-бот №2: Магазин с категориями, корзиной и оплатой</li>
                                       <li>VK-бот №2: Автоответчик с базой знаний (mini-чат-бот)</li>
                                       <li>Лендинг №2: Курсы по английскому + встроенный Telegram-бот</li>
                                   </ul>
                               </td>
                               <td><input type="checkbox" class="status-checkbox" data-field="completed" onchange="saveTaskData(this)"></td>
                               <td><input type="text" placeholder="Заметки..." data-field="notes" onchange="saveTaskData(this)"></td>
                           </tr>

                           <!-- Неделя 3 -->
                           <tr class="week-header">
                               <td colspan="6">Неделя 3: Продвижение и охват</td>
                           </tr>
                           <tr data-task="task-7">
                               <td class="day-cell">15-16</td>
                               <td><input type="date" data-field="date" onchange="saveTaskData(this)"></td>
                               <td class="goal-cell">Публикации и кейсы</td>
                               <td class="tasks-cell">
                                   <ul>
                                       <li>Оформить кейсы в формате «было — стало — польза»</li>
                                       <li>Создать посты: «Нужен бот? Я делаю такие» с примерами</li>
                                   </ul>
                               </td>
                               <td><input type="checkbox" class="status-checkbox" data-field="completed" onchange="saveTaskData(this)"></td>
                               <td><input type="text" placeholder="Заметки..." data-field="notes" onchange="saveTaskData(this)"></td>
                           </tr>
                           <tr data-task="task-8">
                               <td class="day-cell">17-18</td>
                               <td><input type="date" data-field="date" onchange="saveTaskData(this)"></td>
                               <td class="goal-cell">Активное привлечение</td>
                               <td class="tasks-cell">
                                   <ul>
                                       <li>5 постов в пабликах/чатах Telegram с оффером</li>
                                       <li>5 заявок на freelancehunt, kwork, t.me/tgorder</li>
                                       <li>Акция «2 бота бесплатно в портфолио за отзыв»</li>
                                   </ul>
                               </td>
                               <td><input type="checkbox" class="status-checkbox" data-field="completed" onchange="saveTaskData(this)"></td>
                               <td><input type="text" placeholder="Заметки..." data-field="notes" onchange="saveTaskData(this)"></td>
                           </tr>
                           <tr data-task="task-9">
                               <td class="day-cell">19-21</td>
                               <td><input type="date" data-field="date" onchange="saveTaskData(this)"></td>
                               <td class="goal-cell">Работа с откликами</td>
                               <td class="tasks-cell">
                                   <ul>
                                       <li>Ответы на заявки, созвоны с клиентами</li>
                                       <li>Правки по проектам</li>
                                       <li>Упор на ценность, а не просто код</li>
                                   </ul>
                               </td>
                               <td><input type="checkbox" class="status-checkbox" data-field="completed" onchange="saveTaskData(this)"></td>
                               <td><input type="text" placeholder="Заметки..." data-field="notes" onchange="saveTaskData(this)"></td>
                           </tr>

                           <!-- Неделя 4 -->
                           <tr class="week-header">
                               <td colspan="6">Неделя 4: Запуск потока</td>
                           </tr>
                           <tr data-task="task-10">
                               <td class="day-cell">22-24</td>
                               <td><input type="date" data-field="date" onchange="saveTaskData(this)"></td>
                               <td class="goal-cell">Портфолио-проекты – 3 партия (сложные/AI)</td>
                               <td class="tasks-cell">
                                   <ul>
                                       <li>Telegram-бот №3: Бот с интеграцией GPT (ассистент или генератор текстов)</li>
                                       <li>Лендинг №3: Система приёма заявок + база клиентов (автоматизация)</li>
                                   </ul>
                               </td>
                               <td><input type="checkbox" class="status-checkbox" data-field="completed" onchange="saveTaskData(this)"></td>
                               <td><input type="text" placeholder="Заметки..." data-field="notes" onchange="saveTaskData(this)"></td>
                           </tr>
                           <tr data-task="task-11">
                               <td class="day-cell">25-26</td>
                               <td><input type="date" data-field="date" onchange="saveTaskData(this)"></td>
                               <td class="goal-cell">Автоматизация</td>
                               <td class="tasks-cell">
                                   <ul>
                                       <li>Шаблоны Telegram/VK-бота с конфигами</li>
                                       <li>Генерация лендингов (на Jinja, JSON или GPT)</li>
                                       <li>Дашборд админки/логов/заявок</li>
                                   </ul>
                               </td>
                               <td><input type="checkbox" class="status-checkbox" data-field="completed" onchange="saveTaskData(this)"></td>
                               <td><input type="text" placeholder="Заметки..." data-field="notes" onchange="saveTaskData(this)"></td>
                           </tr>
                           <tr data-task="task-12">
                               <td class="day-cell">27-28</td>
                               <td><input type="date" data-field="date" onchange="saveTaskData(this)"></td>
                               <td class="goal-cell">Массовый пуш</td>
                               <td class="tasks-cell">
                                   <ul>
                                       <li>Реклама в 5 телеграм-каналах</li>
                                       <li>Размещение в 2-3 каталогах фрилансеров</li>
                                       <li>Рассылка по локальным бизнесам (email + VK)</li>
                                   </ul>
                               </td>
                               <td><input type="checkbox" class="status-checkbox" data-field="completed" onchange="saveTaskData(this)"></td>
                               <td><input type="text" placeholder="Заметки..." data-field="notes" onchange="saveTaskData(this)"></td>
                           </tr>
                           <tr data-task="task-13">
                               <td class="day-cell">29-30</td>
                               <td><input type="date" data-field="date" onchange="saveTaskData(this)"></td>
                               <td class="goal-cell">Анализ и план на месяц 2</td>
                               <td class="tasks-cell">
                                   <ul>
                                       <li>Анализ: какие офферы сработали</li>
                                       <li>Где клиенты, где мусор</li>
                                       <li>Какие темы качают (где зарыт профит)</li>
                                       <li>План на масштабирование</li>
                                   </ul>
                               </td>
                               <td><input type="checkbox" class="status-checkbox" data-field="completed" onchange="saveTaskData(this)"></td>
                               <td><input type="text" placeholder="Заметки..." data-field="notes" onchange="saveTaskData(this)"></td>
                           </tr>
                       </tbody>
                   </table>
               </div>
           </div>
       </div>

       <!-- Портфолио -->
       <div id="portfolio" class="tab-content">
           <div class="section-header">
               <h2 class="section-title">Портфолио проектов</h2>
               <button class="btn" onclick="addPortfolioItem()">+ Добавить проект</button>
           </div>
           <div class="table-container">
               <div class="table-wrapper">
                   <table>
                       <thead>
                           <tr>
                               <th>Проект</th>
                               <th>Тип</th>
                               <th>Описание</th>
                               <th>Стек</th>
                               <th>Ссылка/демо</th>
                               <th>Статус</th>
                               <th>Дедлайн</th>
                               <th>Действия</th>
                           </tr>
                       </thead>
                       <tbody id="portfolioTableBody">
                           <!-- Данные загружаются из localStorage -->
                       </tbody>
                   </table>
               </div>
           </div>
       </div>

       <!-- Идеи -->
       <div id="ideas" class="tab-content">
           <div class="section-header">
               <h2 class="section-title">Банк идей</h2>
               <button class="btn" onclick="addIdea()">+ Добавить идею</button>
           </div>
           <div class="table-container">
               <div class="table-wrapper">
                   <table>
                       <thead>
                           <tr>
                               <th>Название</th>
                               <th>Тип</th>
                               <th>Описание</th>
                               <th>Приоритет</th>
                               <th>Сложность</th>
                               <th>Комментарий</th>
                               <th>Действия</th>
                           </tr>
                       </thead>
                       <tbody id="ideasTableBody">
                           <!-- Данные загружаются из localStorage -->
                       </tbody>
                   </table>
               </div>
           </div>
       </div>

       <!-- Маркетинг -->
       <div id="marketing" class="tab-content">
           <div class="section-header">
               <h2 class="section-title">Маркетинговые активности</h2>
               <button class="btn" onclick="addMarketingActivity()">+ Добавить активность</button>
           </div>
           <div class="table-container">
               <div class="table-wrapper">
                   <table>
                       <thead>
                           <tr>
                               <th>Канал</th>
                               <th>Тип</th>
                               <th>Дата</th>
                               <th>Действие</th>
                               <th>Результат</th>
                               <th>Конверсия</th>
                               <th>Действия</th>
                           </tr>
                       </thead>
                       <tbody id="marketingTableBody">
                           <!-- Данные загружаются из localStorage -->
                       </tbody>
                   </table>
               </div>
           </div>
       </div>

       <!-- Клиенты -->
       <div id="clients" class="tab-content">
           <div class="section-header">
               <h2 class="section-title">База клиентов</h2>
               <button class="btn" onclick="addClient()">+ Добавить клиента</button>
           </div>
           <div class="table-container">
               <div class="table-wrapper">
                   <table>
                       <thead>
                           <tr>
                               <th>Клиент</th>
                               <th>Контакт</th>
                               <th>Что нужно</th>
                               <th>Стадия</th>
                               <th>Цена</th>
                               <th>Дедлайн</th>
                               <th>Заметки</th>
                               <th>Действия</th>
                           </tr>
                       </thead>
                       <tbody id="clientsTableBody">
                           <!-- Данные загружаются из localStorage -->
                       </tbody>
                   </table>
               </div>
           </div>
       </div>

       <!-- Дашборд -->
       <div id="dashboard" class="tab-content">
           <div class="stats-summary">
               <h3>Системная информация</h3>
               <div class="stats-row">
                   <span>Дата последнего обновления:</span>
                   <span id="lastUpdate">—</span>
               </div>
               <div class="stats-row">
                   <span>Всего записей в системе:</span>
                   <span id="totalRecords">—</span>
               </div>
               <div class="stats-row">
                   <span>Размер базы данных:</span>
                   <span id="dbSize">—</span>
               </div>
               <div class="stats-row">
                   <span>Статус синхронизации:</span>
                   <span id="syncStatus" class="sync-status">Загрузка...</span>
               </div>
           </div>

           <div class="sync-info">
               <h4 style="margin-bottom: 10px; font-weight: 600;">🌐 Облачная синхронизация</h4>
               <p style="margin-bottom: 15px; color: var(--text-secondary); font-size: 0.875rem;">
                   Настройте синхронизацию для доступа к данным с любого устройства и браузера.
                   Поддерживаются GitHub Gist, JSONBin.io и другие провайдеры.
               </p>
               <div class="sync-actions">
                   <button class="btn btn-small" onclick="db.showCloudSetupPrompt()">
                       Настроить синхронизацию
                   </button>
                   <button class="btn btn-small btn-secondary" onclick="forceSync()" style="display: none;" id="forceSyncBtn">
                       Принудительная синхронизация
                   </button>
                   <button class="btn btn-small btn-secondary" onclick="refreshFromCloud()" style="display: none;" id="refreshBtn">
                       Обновить из облака
                   </button>
               </div>
           </div>

           <div class="dashboard-grid">
               <div class="metric-card">
                   <div class="metric-value" id="completedTasks">0</div>
                   <div class="metric-label">Выполнено задач</div>
                   <div class="progress-bar">
                       <div class="progress-fill" id="tasksProgress" style="width: 0%"></div>
                   </div>
               </div>
               <div class="metric-card">
                   <div class="metric-value" id="portfolioProjects">0</div>
                   <div class="metric-label">Проектов в портфолио</div>
               </div>
               <div class="metric-card">
                   <div class="metric-value" id="activeClients">0</div>
                   <div class="metric-label">Активных клиентов</div>
               </div>
               <div class="metric-card">
                   <div class="metric-value" id="totalRevenue">0 ₽</div>
                   <div class="metric-label">Общий доход</div>
               </div>
           </div>

           <div style="margin-top: var(--spacing-2xl);">
               <h3 style="margin-bottom: var(--spacing-xl); color: var(--text-primary); font-weight: 700;">Прогресс по неделям</h3>
               <div class="table-container">
                   <div class="table-wrapper">
                       <table>
                           <thead>
                               <tr>
                                   <th>Неделя</th>
                                   <th>Цель</th>
                                   <th>Прогресс</th>
                                   <th>Статус</th>
                               </tr>
                           </thead>
                           <tbody>
                               <tr>
                                   <td><strong>Неделя 1</strong></td>
                                   <td>Старт и база</td>
                                   <td>
                                       <div class="progress-bar">
                                           <div class="progress-fill" id="week1Progress" style="width: 0%"></div>
                                       </div>
                                   </td>
                                   <td id="week1Status">Не начато</td>
                               </tr>
                               <tr>
                                   <td><strong>Неделя 2</strong></td>
                                   <td>Прокачка + упаковка</td>
                                   <td>
                                       <div class="progress-bar">
                                           <div class="progress-fill" id="week2Progress" style="width: 0%"></div>
                                       </div>
                                   </td>
                                   <td id="week2Status">Не начато</td>
                               </tr>
                               <tr>
                                   <td><strong>Неделя 3</strong></td>
                                   <td>Продвижение и охват</td>
                                   <td>
                                       <div class="progress-bar">
                                           <div class="progress-fill" id="week3Progress" style="width: 0%"></div>
                                       </div>
                                   </td>
                                   <td id="week3Status">Не начато</td>
                               </tr>
                               <tr>
                                   <td><strong>Неделя 4</strong></td>
                                   <td>Запуск потока</td>
                                   <td>
                                       <div class="progress-bar">
                                           <div class="progress-fill" id="week4Progress" style="width: 0%"></div>
                                       </div>
                                   </td>
                                   <td id="week4Status">Не начато</td>
                               </tr>
                           </tbody>
                       </table>
                   </div>
               </div>
           </div>

           <div style="margin-top: var(--spacing-2xl);">
               <h3 style="margin-bottom: var(--spacing-xl); color: var(--text-primary); font-weight: 700;">Управление данными</h3>
               <div class="action-buttons">
                   <button class="btn" onclick="exportData()">Экспорт данных</button>
                   <button class="btn" onclick="importData()">Импорт данных</button>
                   <button class="btn btn-secondary" onclick="clearAllData()">Очистить все</button>
               </div>
               <input type="file" id="importFile" accept=".json" style="display: none;" onchange="handleFileImport(this)">
           </div>
       </div>
   </div>

   <script>
       // Система управления данными с поддержкой облачного хранения
       class ZerXDatabase {
           constructor() {
               this.storageKey = 'zerx_project_data';
               this.cloudStorageUrl = null; // Будет настроено позже
               this.syncInProgress = false;
               this.offlineMode = true; // Начинаем в оффлайн режиме
               this.initializeData();
               this.initializeCloudSync();
           }

           // === ЛОКАЛЬНОЕ ХРАНЕНИЕ ===
           initializeData() {
               const existingData = localStorage.getItem(this.storageKey);
               if (!existingData) {
                   const initialData = {
                       tasks: {},
                       portfolio: [],
                       ideas: [],
                       marketing: [],
                       clients: [],
                       metadata: {
                           created: new Date().toISOString(),
                           version: '1.0',
                           lastUpdate: new Date().toISOString(),
                           syncStatus: 'local'
                       }
                   };
                   this.saveDataLocal(initialData);
               }
           }

           // === ОБЛАЧНАЯ СИНХРОНИЗАЦИЯ ===
           initializeCloudSync() {
               // Проверяем, есть ли настройки для облачного хранения в URL или localStorage
               const urlParams = new URLSearchParams(window.location.search);
               const cloudProvider = urlParams.get('cloud') || localStorage.getItem('zerx_cloud_provider');
               const cloudKey = urlParams.get('key') || localStorage.getItem('zerx_cloud_key');

               if (cloudProvider && cloudKey) {
                   this.setupCloudProvider(cloudProvider, cloudKey);
               } else {
                   this.showCloudSetupPrompt();
               }
           }

           setupCloudProvider(provider, key) {
               switch (provider) {
                   case 'github':
                       this.setupGitHub(key);
                       break;
                   case 'firebase':
                       this.setupFirebase(key);
                       break;
                   case 'supabase':
                       this.setupSupabase(key);
                       break;
                   case 'jsonbin':
                       this.setupJSONBin(key);
                       break;
                   default:
                       console.warn('Неподдерживаемый провайдер облачного хранения');
               }
           }

           // === ПРОВАЙДЕРЫ ОБЛАЧНОГО ХРАНЕНИЯ ===

           // 1. GitHub Gist (бесплатно, простой API)
           setupGitHub(token) {
               this.cloudProvider = 'github';
               this.githubToken = token;
               this.cloudStorageUrl = 'https://api.github.com/gists';
               localStorage.setItem('zerx_cloud_provider', 'github');
               localStorage.setItem('zerx_cloud_key', token);
               this.offlineMode = false;
               this.syncFromCloud();
           }

           async saveToGitHub(data) {
               try {
                   const gistId = localStorage.getItem('zerx_gist_id');
                   const payload = {
                       description: "ZerX Project Data",
                       files: {
                           "zerx_data.json": {
                               content: JSON.stringify(data, null, 2)
                           }
                       }
                   };

                   let response;
                   if (gistId) {
                       // Обновляем существующий gist
                       response = await fetch(`https://api.github.com/gists/${gistId}`, {
                           method: 'PATCH',
                           headers: {
                               'Authorization': `token ${this.githubToken}`,
                               'Content-Type': 'application/json',
                           },
                           body: JSON.stringify(payload)
                       });
                   } else {
                       // Создаем новый gist
                       response = await fetch('https://api.github.com/gists', {
                           method: 'POST',
                           headers: {
                               'Authorization': `token ${this.githubToken}`,
                               'Content-Type': 'application/json',
                           },
                           body: JSON.stringify({
                               ...payload,
                               public: false
                           })
                       });
                   }

                   if (response.ok) {
                       const result = await response.json();
                       localStorage.setItem('zerx_gist_id', result.id);
                       data.metadata.syncStatus = 'synced';
                       data.metadata.cloudId = result.id;
                       return true;
                   }
               } catch (error) {
                   console.error('Ошибка синхронизации с GitHub:', error);
                   data.metadata.syncStatus = 'error';
               }
               return false;
           }

           async loadFromGitHub() {
               try {
                   const gistId = localStorage.getItem('zerx_gist_id');
                   if (!gistId) return null;

                   const response = await fetch(`https://api.github.com/gists/${gistId}`, {
                       headers: {
                           'Authorization': `token ${this.githubToken}`,
                       }
                   });

                   if (response.ok) {
                       const gist = await response.json();
                       const content = gist.files['zerx_data.json']?.content;
                       return content ? JSON.parse(content) : null;
                   }
               } catch (error) {
                   console.error('Ошибка загрузки из GitHub:', error);
               }
               return null;
           }

           // 2. JSONBin.io (бесплатно, простой в использовании)
           setupJSONBin(apiKey) {
               this.cloudProvider = 'jsonbin';
               this.jsonbinKey = apiKey;
               this.cloudStorageUrl = 'https://api.jsonbin.io/v3/b';
               localStorage.setItem('zerx_cloud_provider', 'jsonbin');
               localStorage.setItem('zerx_cloud_key', apiKey);
               this.offlineMode = false;
               this.syncFromCloud();
           }

           async saveToJSONBin(data) {
               try {
                   const binId = localStorage.getItem('zerx_bin_id');
                   let response;

                   if (binId) {
                       // Обновляем существующий bin
                       response = await fetch(`https://api.jsonbin.io/v3/b/${binId}`, {
                           method: 'PUT',
                           headers: {
                               'Content-Type': 'application/json',
                               'X-Master-Key': this.jsonbinKey
                           },
                           body: JSON.stringify(data)
                       });
                   } else {
                       // Создаем новый bin
                       response = await fetch('https://api.jsonbin.io/v3/b', {
                           method: 'POST',
                           headers: {
                               'Content-Type': 'application/json',
                               'X-Master-Key': this.jsonbinKey,
                               'X-Bin-Name': 'ZerX Project Data'
                           },
                           body: JSON.stringify(data)
                       });
                   }

                   if (response.ok) {
                       const result = await response.json();
                       localStorage.setItem('zerx_bin_id', result.metadata.id);
                       data.metadata.syncStatus = 'synced';
                       data.metadata.cloudId = result.metadata.id;
                       return true;
                   }
               } catch (error) {
                   console.error('Ошибка синхронизации с JSONBin:', error);
                   data.metadata.syncStatus = 'error';
               }
               return false;
           }

           async loadFromJSONBin() {
               try {
                   const binId = localStorage.getItem('zerx_bin_id');
                   if (!binId) return null;

                   const response = await fetch(`https://api.jsonbin.io/v3/b/${binId}/latest`, {
                       headers: {
                           'X-Master-Key': this.jsonbinKey
                       }
                   });

                   if (response.ok) {
                       const result = await response.json();
                       return result.record;
                   }
               } catch (error) {
                   console.error('Ошибка загрузки из JSONBin:', error);
               }
               return null;
           }

           setupCustomAPI(apiUrl, apiKey) {
               this.cloudProvider = 'custom';
               this.customAPIUrl = apiUrl;
               this.customAPIKey = apiKey;
               localStorage.setItem('zerx_cloud_provider', 'custom');
               localStorage.setItem('zerx_cloud_key', apiKey);
               localStorage.setItem('zerx_api_url', apiUrl);
               this.offlineMode = false;
               this.syncFromCloud();
           }

           async saveToCustomAPI(data) {
               try {
                   const response = await fetch(this.customAPIUrl, {
                       method: 'POST',
                       headers: {
                           'Content-Type': 'application/json',
                           'Authorization': `Bearer ${this.customAPIKey}`
                       },
                       body: JSON.stringify(data)
                   });

                   if (response.ok) {
                       data.metadata.syncStatus = 'synced';
                       return true;
                   }
               } catch (error) {
                   console.error('Ошибка синхронизации с Custom API:', error);
                   data.metadata.syncStatus = 'error';
               }
               return false;
           }

           // === УНИФИЦИРОВАННЫЕ МЕТОДЫ ===

           async syncToCloud(data) {
               if (this.offlineMode || this.syncInProgress) return false;
               
               this.syncInProgress = true;
               this.showSyncIndicator('Синхронизация...');

               let success = false;
               switch (this.cloudProvider) {
                   case 'github':
                       success = await this.saveToGitHub(data);
                       break;
                   case 'jsonbin':
                       success = await this.saveToJSONBin(data);
                       break;
                   case 'custom':
                       success = await this.saveToCustomAPI(data);
                       break;
               }

               if (success) {
                   this.showSyncIndicator('Синхронизировано ✓', 'success');
               } else {
                   this.showSyncIndicator('Ошибка синхронизации ✗', 'error');
               }

               this.syncInProgress = false;
               return success;
           }

           async syncFromCloud() {
               if (this.offlineMode) return false;

               this.showSyncIndicator('Загрузка из облака...');

               let cloudData = null;
               switch (this.cloudProvider) {
                   case 'github':
                       cloudData = await this.loadFromGitHub();
                       break;
                   case 'jsonbin':
                       cloudData = await this.loadFromJSONBin();
                       break;
               }

               if (cloudData) {
                   const localData = this.getDataLocal();
                   const cloudUpdateTime = new Date(cloudData.metadata.lastUpdate);
                   const localUpdateTime = new Date(localData.metadata.lastUpdate);

                   if (cloudUpdateTime > localUpdateTime) {
                       this.saveDataLocal(cloudData);
                       this.loadAllData();
                       this.showSyncIndicator('Данные обновлены из облака ✓', 'success');
                       return true;
                   } else {
                       this.showSyncIndicator('Локальные данные актуальны ✓', 'success');
                   }
               }

               return false;
           }

           // === ЛОКАЛЬНЫЕ МЕТОДЫ (без изменений) ===
           
           getDataLocal() {
               const data = localStorage.getItem(this.storageKey);
               return data ? JSON.parse(data) : null;
           }

           saveDataLocal(data) {
               data.metadata.lastUpdate = new Date().toISOString();
               localStorage.setItem(this.storageKey, JSON.stringify(data));
               this.showSaveIndicator();
           }

           getData() {
               return this.getDataLocal();
           }

           async saveData(data) {
               // Сначала сохраняем локально
               this.saveDataLocal(data);
               
               // Затем пытаемся синхронизировать с облаком
               if (!this.offlineMode) {
                   await this.syncToCloud(data);
               }
           }

           saveTask(taskId, field, value) {
               const data = this.getData();
               if (!data.tasks[taskId]) {
                   data.tasks[taskId] = {};
               }
               data.tasks[taskId][field] = value;
               this.saveData(data);
           }

           getTask(taskId) {
               const data = this.getData();
               return data.tasks[taskId] || {};
           }

           addRecord(table, record) {
               const data = this.getData();
               record.id = this.generateId();
               record.created = new Date().toISOString();
               data[table].push(record);
               this.saveData(data);
               return record.id;
           }

           updateRecord(table, id, updates) {
               const data = this.getData();
               const index = data[table].findIndex(item => item.id === id);
               if (index !== -1) {
                   data[table][index] = { ...data[table][index], ...updates, updated: new Date().toISOString() };
                   this.saveData(data);
               }
           }

           deleteRecord(table, id) {
               const data = this.getData();
               data[table] = data[table].filter(item => item.id !== id);
               this.saveData(data);
           }

           generateId() {
               return 'id_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
           }

           // === UI ИНДИКАТОРЫ ===

           showSaveIndicator() {
               const indicator = document.getElementById('saveIndicator');
               indicator.textContent = 'СОХРАНЕНО';
               indicator.className = 'save-indicator show';
               setTimeout(() => {
                   indicator.classList.remove('show');
               }, 2000);
           }

           showSyncIndicator(message, type = 'info') {
               const indicator = document.getElementById('saveIndicator');
               indicator.textContent = message;
               indicator.className = `save-indicator show sync-${type}`;
               
               if (type !== 'loading') {
                   setTimeout(() => {
                       indicator.classList.remove('show');
                   }, 3000);
               }
           }

           showCloudSetupPrompt() {
               // Создаем модальное окно для настройки облачного хранения
               const modal = document.createElement('div');
               modal.className = 'cloud-setup-modal';
               modal.innerHTML = `
                   <div class="cloud-setup-content">
                       <h3>Настройка облачного хранения</h3>
                       <p>Выберите провайдер для синхронизации данных между устройствами:</p>
                       
                       <div class="cloud-options">
                           <button class="cloud-option" onclick="db.setupCloudOption('github')">
                               <strong>GitHub Gist</strong>
                               <small>Бесплатно, надежно</small>
                           </button>
                           <button class="cloud-option" onclick="db.setupCloudOption('jsonbin')">
                               <strong>JSONBin.io</strong>
                               <small>Простая настройка</small>
                           </button>
                           <button class="cloud-option" onclick="db.setupCloudOption('local')">
                               <strong>Только локально</strong>
                               <small>Без синхронизации</small>
                           </button>
                       </div>
                       
                       <button class="btn btn-secondary" onclick="db.closeCloudSetup()" style="margin-top: 20px;">
                           Пропустить
                       </button>
                   </div>
               `;
               document.body.appendChild(modal);
           }

           setupCloudOption(provider) {
               this.closeCloudSetup();
               
               if (provider === 'local') {
                   this.offlineMode = true;
                   return;
               }

               const instructions = {
                   github: {
                       title: 'Настройка GitHub Gist',
                       steps: [
                           '1. Перейдите на github.com/settings/tokens',
                           '2. Создайте новый Personal Access Token',
                           '3. Выберите права: "gist"',
                           '4. Скопируйте токен и вставьте ниже'
                       ],
                       placeholder: 'Вставьте GitHub token'
                   },
                   jsonbin: {
                       title: 'Настройка JSONBin.io',
                       steps: [
                           '1. Перейдите на jsonbin.io',
                           '2. Зарегистрируйтесь бесплатно',
                           '3. Получите API ключ в личном кабинете',
                           '4. Скопируйте ключ и вставьте ниже'
                       ],
                       placeholder: 'Вставьте JSONBin API ключ'
                   }
               };

               const config = instructions[provider];
               const modal = document.createElement('div');
               modal.className = 'cloud-setup-modal';
               modal.innerHTML = `
                   <div class="cloud-setup-content">
                       <h3>${config.title}</h3>
                       <ol>
                           ${config.steps.map(step => `<li>${step}</li>`).join('')}
                       </ol>
                       
                       <input type="text" 
                              id="cloudApiKey" 
                              placeholder="${config.placeholder}"
                              style="width: 100%; margin: 20px 0; padding: 10px;">
                       
                       <div style="display: flex; gap: 10px;">
                           <button class="btn" onclick="db.saveCloudConfig('${provider}')">
                               Сохранить
                           </button>
                           <button class="btn btn-secondary" onclick="db.closeCloudSetup()">
                               Отмена
                           </button>
                       </div>
                   </div>
               `;
               document.body.appendChild(modal);
           }

           saveCloudConfig(provider) {
               const apiKey = document.getElementById('cloudApiKey').value.trim();
               if (apiKey) {
                   this.setupCloudProvider(provider, apiKey);
                   this.closeCloudSetup();
               } else {
                   alert('Пожалуйста, введите API ключ');
               }
           }

           closeCloudSetup() {
               const modal = document.querySelector('.cloud-setup-modal');
               if (modal) {
                   modal.remove();
               }
           }

           // === УПРАВЛЕНИЕ ДАННЫМИ ===

           exportData() {
               const data = this.getData();
               const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
               const url = URL.createObjectURL(blob);
               const a = document.createElement('a');
               a.href = url;
               a.download = `zerx_data_${new Date().toISOString().split('T')[0]}.json`;
               a.click();
               URL.revokeObjectURL(url);
           }

           importData(jsonData) {
               try {
                   const data = JSON.parse(jsonData);
                   if (data.metadata && data.tasks !== undefined) {
                       this.saveData(data);
                       this.loadAllData();
                       alert('Данные успешно импортированы!');
                   } else {
                       alert('Неверный формат файла!');
                   }
               } catch (e) {
                   alert('Ошибка при чтении файла!');
               }
           }

           clearAllData() {
               if (confirm('Вы уверены, что хотите удалить ВСЕ данные? Это действие необратимо!')) {
                   localStorage.removeItem(this.storageKey);
                   // Очищаем и облачные данные, если настроены
                   if (!this.offlineMode) {
                       this.clearCloudData();
                   }
                   this.initializeData();
                   this.loadAllData();
                   alert('Все данные удалены!');
               }
           }

           async clearCloudData() {
               // Реализация очистки облачных данных для каждого провайдера
               switch (this.cloudProvider) {
                   case 'github':
                       localStorage.removeItem('zerx_gist_id');
                       break;
                   case 'jsonbin':
                       localStorage.removeItem('zerx_bin_id');
                       break;
               }
           }

           getStorageSize() {
               const data = localStorage.getItem(this.storageKey);
               if (data) {
                   const sizeInBytes = new Blob([data]).size;
                   if (sizeInBytes < 1024) return sizeInBytes + ' B';
                   if (sizeInBytes < 1024 * 1024) return Math.round(sizeInBytes / 1024) + ' KB';
                   return Math.round(sizeInBytes / (1024 * 1024)) + ' MB';
               }
               return '0 B';
           }

           // === ЗАГРУЗКА И ОТОБРАЖЕНИЕ ДАННЫХ ===
           
           loadAllData() {
               this.loadTasksData();
               this.loadPortfolioData();
               this.loadIdeasData();
               this.loadMarketingData();
               this.loadClientsData();
               this.updateDashboard();
           }

           loadTasksData() {
               const data = this.getData();
               document.querySelectorAll('[data-task]').forEach(row => {
                   const taskId = row.getAttribute('data-task');
                   const taskData = data.tasks[taskId] || {};
                   
                   row.querySelectorAll('[data-field]').forEach(input => {
                       const field = input.getAttribute('data-field');
                       if (taskData[field] !== undefined) {
                           if (input.type === 'checkbox') {
                               input.checked = taskData[field];
                           } else {
                               input.value = taskData[field];
                           }
                       }
                   });
               });
               this.updateProgress();
           }

           loadPortfolioData() {
               const data = this.getData();
               const tbody = document.getElementById('portfolioTableBody');
               tbody.innerHTML = '';
               
               data.portfolio.forEach(project => {
                   this.renderPortfolioRow(project);
               });
           }

           loadIdeasData() {
               const data = this.getData();
               const tbody = document.getElementById('ideasTableBody');
               tbody.innerHTML = '';
               
               data.ideas.forEach(idea => {
                   this.renderIdeaRow(idea);
               });
           }

           loadMarketingData() {
               const data = this.getData();
               const tbody = document.getElementById('marketingTableBody');
               tbody.innerHTML = '';
               
               data.marketing.forEach(activity => {
                   this.renderMarketingRow(activity);
               });
           }

           loadClientsData() {
               const data = this.getData();
               const tbody = document.getElementById('clientsTableBody');
               tbody.innerHTML = '';
               
               data.clients.forEach(client => {
                   this.renderClientRow(client);
               });
           }

           renderPortfolioRow(project) {
               const tbody = document.getElementById('portfolioTableBody');
               const row = tbody.insertRow();
               row.innerHTML = `
                   <td><input type="text" value="${project.name || ''}" onchange="db.updateRecord('portfolio', '${project.id}', {name: this.value})"></td>
                   <td>
                       <select onchange="db.updateRecord('portfolio', '${project.id}', {type: this.value})">
                           <option value="telegram" ${project.type === 'telegram' ? 'selected' : ''}>Telegram Bot</option>
                           <option value="vk" ${project.type === 'vk' ? 'selected' : ''}>VK Bot</option>
                           <option value="landing" ${project.type === 'landing' ? 'selected' : ''}>Landing Page</option>
                           <option value="webapp" ${project.type === 'webapp' ? 'selected' : ''}>Web App</option>
                       </select>
                   </td>
                   <td><input type="text" value="${project.description || ''}" onchange="db.updateRecord('portfolio', '${project.id}', {description: this.value})"></td>
                   <td><input type="text" value="${project.stack || ''}" onchange="db.updateRecord('portfolio', '${project.id}', {stack: this.value})"></td>
                   <td><input type="text" value="${project.link || ''}" onchange="db.updateRecord('portfolio', '${project.id}', {link: this.value})"></td>
                   <td>
                       <span class="stage-badge stage-${project.status || 'new'}">
                           ${this.getStatusText(project.status)}
                       </span>
                       <select onchange="db.updateRecord('portfolio', '${project.id}', {status: this.value}); this.previousElementSibling.className = 'stage-badge stage-' + this.value; this.previousElementSibling.textContent = db.getStatusText(this.value);">
                           <option value="planned" ${project.status === 'planned' ? 'selected' : ''}>Планируется</option>
                           <option value="work" ${project.status === 'work' ? 'selected' : ''}>В работе</option>
                           <option value="done" ${project.status === 'done' ? 'selected' : ''}>Готово</option>
                       </select>
                   </td>
                   <td><input type="date" value="${project.deadline || ''}" onchange="db.updateRecord('portfolio', '${project.id}', {deadline: this.value})"></td>
                   <td><button class="btn btn-small btn-secondary" onclick="db.deleteRecord('portfolio', '${project.id}'); this.closest('tr').remove(); db.updateDashboard()">Удалить</button></td>
               `;
           }

           renderIdeaRow(idea) {
               const tbody = document.getElementById('ideasTableBody');
               const row = tbody.insertRow();
               row.innerHTML = `
                   <td><input type="text" value="${idea.name || ''}" onchange="db.updateRecord('ideas', '${idea.id}', {name: this.value})"></td>
                   <td>
                       <select onchange="db.updateRecord('ideas', '${idea.id}', {type: this.value})">
                           <option value="telegram" ${idea.type === 'telegram' ? 'selected' : ''}>Telegram Bot</option>
                           <option value="vk" ${idea.type === 'vk' ? 'selected' : ''}>VK Bot</option>
                           <option value="landing" ${idea.type === 'landing' ? 'selected' : ''}>Landing Page</option>
                           <option value="webapp" ${idea.type === 'webapp' ? 'selected' : ''}>Web App</option>
                           <option value="integration" ${idea.type === 'integration' ? 'selected' : ''}>Интеграция</option>
                       </select>
                   </td>
                   <td><input type="text" value="${idea.description || ''}" onchange="db.updateRecord('ideas', '${idea.id}', {description: this.value})"></td>
                   <td>
                       <span class="priority-${idea.priority || 'medium'}">${this.getPriorityText(idea.priority)}</span>
                       <select onchange="db.updateRecord('ideas', '${idea.id}', {priority: this.value}); this.previousElementSibling.className = 'priority-' + this.value; this.previousElementSibling.textContent = db.getPriorityText(this.value);">
                           <option value="high" ${idea.priority === 'high' ? 'selected' : ''}>Высокий</option>
                           <option value="medium" ${idea.priority === 'medium' ? 'selected' : ''}>Средний</option>
                           <option value="low" ${idea.priority === 'low' ? 'selected' : ''}>Низкий</option>
                       </select>
                   </td>
                   <td>
                       <select onchange="db.updateRecord('ideas', '${idea.id}', {complexity: this.value})">
                           <option value="low" ${idea.complexity === 'low' ? 'selected' : ''}>Низкая</option>
                           <option value="medium" ${idea.complexity === 'medium' ? 'selected' : ''}>Средняя</option>
                           <option value="high" ${idea.complexity === 'high' ? 'selected' : ''}>Высокая</option>
                       </select>
                   </td>
                   <td><input type="text" value="${idea.comment || ''}" onchange="db.updateRecord('ideas', '${idea.id}', {comment: this.value})"></td>
                   <td><button class="btn btn-small btn-secondary" onclick="db.deleteRecord('ideas', '${idea.id}'); this.closest('tr').remove()">Удалить</button></td>
               `;
           }

           renderMarketingRow(activity) {
               const tbody = document.getElementById('marketingTableBody');
               const row = tbody.insertRow();
               row.innerHTML = `
                   <td><input type="text" value="${activity.channel || ''}" onchange="db.updateRecord('marketing', '${activity.id}', {channel: this.value})"></td>
                   <td>
                       <select onchange="db.updateRecord('marketing', '${activity.id}', {type: this.value})">
                           <option value="post" ${activity.type === 'post' ? 'selected' : ''}>Пост</option>
                           <option value="ad" ${activity.type === 'ad' ? 'selected' : ''}>Реклама</option>
                           <option value="application" ${activity.type === 'application' ? 'selected' : ''}>Заявка</option>
                           <option value="email" ${activity.type === 'email' ? 'selected' : ''}>Email</option>
                           <option value="call" ${activity.type === 'call' ? 'selected' : ''}>Звонок</option>
                       </select>
                   </td>
                   <td><input type="date" value="${activity.date || ''}" onchange="db.updateRecord('marketing', '${activity.id}', {date: this.value})"></td>
                   <td><input type="text" value="${activity.action || ''}" onchange="db.updateRecord('marketing', '${activity.id}', {action: this.value})"></td>
                   <td><input type="text" value="${activity.result || ''}" onchange="db.updateRecord('marketing', '${activity.id}', {result: this.value})"></td>
                   <td><input type="text" value="${activity.conversion || ''}" onchange="db.updateRecord('marketing', '${activity.id}', {conversion: this.value})"></td>
                   <td><button class="btn btn-small btn-secondary" onclick="db.deleteRecord('marketing', '${activity.id}'); this.closest('tr').remove()">Удалить</button></td>
               `;
           }

           renderClientRow(client) {
               const tbody = document.getElementById('clientsTableBody');
               const row = tbody.insertRow();
               row.innerHTML = `
                   <td><input type="text" value="${client.name || ''}" onchange="db.updateRecord('clients', '${client.id}', {name: this.value})"></td>
                   <td><input type="text" value="${client.contact || ''}" onchange="db.updateRecord('clients', '${client.id}', {contact: this.value})"></td>
                   <td><input type="text" value="${client.project || ''}" onchange="db.updateRecord('clients', '${client.id}', {project: this.value})"></td>
                   <td>
                       <span class="stage-badge stage-${client.stage || 'new'}">
                           ${this.getStageText(client.stage)}
                       </span>
                       <select onchange="db.updateRecord('clients', '${client.id}', {stage: this.value}); this.previousElementSibling.className = 'stage-badge stage-' + this.value; this.previousElementSibling.textContent = db.getStageText(this.value); db.updateDashboard()">
                           <option value="new" ${client.stage === 'new' ? 'selected' : ''}>Новый лид</option>
                           <option value="contact" ${client.stage === 'contact' ? 'selected' : ''}>Первый контакт</option>
                           <option value="work" ${client.stage === 'work' ? 'selected' : ''}>В работе</option>
                           <option value="done" ${client.stage === 'done' ? 'selected' : ''}>Завершён</option>
                       </select>
                   </td>
                   <td><input type="text" value="${client.price || ''}" onchange="db.updateRecord('clients', '${client.id}', {price: this.value}); db.updateDashboard()"></td>
                   <td><input type="date" value="${client.deadline || ''}" onchange="db.updateRecord('clients', '${client.id}', {deadline: this.value})"></td>
                   <td><input type="text" value="${client.notes || ''}" onchange="db.updateRecord('clients', '${client.id}', {notes: this.value})"></td>
                   <td><button class="btn btn-small btn-secondary" onclick="db.deleteRecord('clients', '${client.id}'); this.closest('tr').remove(); db.updateDashboard()">Удалить</button></td>
               `;
           }

           getStatusText(status) {
               const statusMap = {
                   'planned': 'Планируется',
                   'work': 'В работе',
                   'done': 'Готово'
               };
               return statusMap[status] || 'Планируется';
           }

           getPriorityText(priority) {
               const priorityMap = {
                   'high': 'Высокий',
                   'medium': 'Средний',
                   'low': 'Низкий'
               };
               return priorityMap[priority] || 'Средний';
           }

           getStageText(stage) {
               const stageMap = {
                   'new': 'Новый лид',
                   'contact': 'Первый контакт',
                   'work': 'В работе',
                   'done': 'Завершён'
               };
               return stageMap[stage] || 'Новый лид';
           }

           updateProgress() {
               const checkboxes = document.querySelectorAll('#planTableBody .status-checkbox');
               const completed = Array.from(checkboxes).filter(cb => cb.checked).length;
               const total = checkboxes.length;
               const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;
               
               document.getElementById('completedTasks').textContent = completed;
               document.getElementById('tasksProgress').style.width = percentage + '%';
               
               this.updateWeekProgress();
           }

           updateWeekProgress() {
               const weeks = [
                   { start: 0, end: 3, id: 'week1' },
                   { start: 3, end: 6, id: 'week2' },
                   { start: 6, end: 9, id: 'week3' },
                   { start: 9, end: 13, id: 'week4' }
               ];
               
               const checkboxes = document.querySelectorAll('#planTableBody .status-checkbox');
               
               weeks.forEach(week => {
                   const weekCheckboxes = Array.from(checkboxes).slice(week.start, week.end);
                   const completed = weekCheckboxes.filter(cb => cb.checked).length;
                   const total = weekCheckboxes.length;
                   const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;
                   
                   const progressElement = document.getElementById(week.id + 'Progress');
                   const statusElement = document.getElementById(week.id + 'Status');
                   
                   if (progressElement) progressElement.style.width = percentage + '%';
                   
                   let status = 'Не начато';
                   if (percentage > 0 && percentage < 100) status = 'В процессе';
                   if (percentage === 100) status = 'Завершено';
                   
                   if (statusElement) statusElement.textContent = status;
               });
           }

           updateDashboard() {
               const data = this.getData();
               
               // Обновление метрик
               document.getElementById('portfolioProjects').textContent = data.portfolio.length;
               
               const activeClients = data.clients.filter(client => 
                   client.stage === 'contact' || client.stage === 'work'
               ).length;
               document.getElementById('activeClients').textContent = activeClients;
               
               const totalRevenue = data.clients
                   .filter(client => client.stage === 'done' && client.price)
                   .reduce((sum, client) => {
                       const price = parseInt(client.price.replace(/\D/g, '')) || 0;
                       return sum + price;
                   }, 0);
               document.getElementById('totalRevenue').textContent = totalRevenue.toLocaleString() + ' ₽';
               
               // Обновление статистики
               document.getElementById('lastUpdate').textContent = 
                   new Date(data.metadata.lastUpdate).toLocaleString('ru-RU');
               
               const totalRecords = Object.keys(data.tasks).length + 
                   data.portfolio.length + data.ideas.length + 
                   data.marketing.length + data.clients.length;
               document.getElementById('totalRecords').textContent = totalRecords;
               
               document.getElementById('dbSize').textContent = this.getStorageSize();
               
               // Обновляем статус синхронизации
               const syncStatus = data.metadata.syncStatus || 'local';
               const syncElement = document.getElementById('syncStatus');
               if (syncElement) {
                   syncElement.textContent = this.getSyncStatusText(syncStatus);
                   syncElement.className = `sync-status status-${syncStatus}`;
               }
               
               this.updateProgress();
           }

           getSyncStatusText(status) {
               const statusMap = {
                   'local': 'Только локально',
                   'synced': 'Синхронизировано',
                   'pending': 'Ожидает синхронизации',
                   'error': 'Ошибка синхронизации'
               };
               return statusMap[status] || 'Неизвестно';
           }
       }

       // Инициализация базы данных
       const db = new ZerXDatabase();

       // Функции интерфейса
       function showTab(tabName) {
           document.querySelectorAll('.tab-content').forEach(content => 
               content.classList.remove('active'));
           document.querySelectorAll('.tab').forEach(tab => 
               tab.classList.remove('active'));
           
           document.getElementById(tabName).classList.add('active');
           event.target.classList.add('active');
       }

       function saveTaskData(element) {
           const row = element.closest('[data-task]');
           const taskId = row.getAttribute('data-task');
           const field = element.getAttribute('data-field');
           const value = element.type === 'checkbox' ? element.checked : element.value;
           
           db.saveTask(taskId, field, value);
           db.updateProgress();
       }

       function addPortfolioItem() {
           const id = db.addRecord('portfolio', {
               name: 'Новый проект',
               type: 'telegram',
               description: '',
               stack: '',
               link: '',
               status: 'planned',
               deadline: ''
           });
           db.loadPortfolioData();
           db.updateDashboard();
       }

       function addIdea() {
           const id = db.addRecord('ideas', {
               name: 'Новая идея',
               type: 'telegram',
               description: '',
               priority: 'medium',
               complexity: 'medium',
               comment: ''
           });
           db.loadIdeasData();
       }

       function addMarketingActivity() {
           const id = db.addRecord('marketing', {
               channel: '',
               type: 'post',
               date: '',
               action: '',
               result: '',
               conversion: ''
           });
           db.loadMarketingData();
       }

       function addClient() {
           const id = db.addRecord('clients', {
               name: '',
               contact: '',
               project: '',
               stage: 'new',
               price: '',
               deadline: '',
               notes: ''
           });
           db.loadClientsData();
           db.updateDashboard();
       }

       function exportData() {
           db.exportData();
       }

       function importData() {
           document.getElementById('importFile').click();
       }

       function handleFileImport(input) {
           const file = input.files[0];
           if (file) {
               const reader = new FileReader();
               reader.onload = function(e) {
                   db.importData(e.target.result);
               };
               reader.readAsText(file);
           }
       }

       function clearAllData() {
           db.clearAllData();
       }

       // Функции для управления облачной синхронизацией
       function forceSync() {
           const data = db.getData();
           db.syncToCloud(data);
       }

       function refreshFromCloud() {
           db.syncFromCloud();
       }

       // Инициализация при загрузке
       document.addEventListener('DOMContentLoaded', function() {
           db.loadAllData();
           
           // Автосохранение каждые 60 секунд
           setInterval(() => {
               const data = db.getData();
               if (data) {
                   db.saveData(data);
               }
           }, 60000);

           // Автосинхронизация каждые 5 минут (если настроена)
           setInterval(() => {
               if (!db.offlineMode) {
                   db.syncFromCloud();
               }
           }, 300000);

           // Добавляем заранее заданные идеи при первом запуске
           const data = db.getData();
           if (data.ideas.length === 0) {
               const defaultIdeas = [
                   {
                       name: 'GPT-ассистент для блогеров',
                       type: 'telegram',
                       description: 'Генерация постов, анекдотов, резюме с помощью ChatGPT API',
                       priority: 'high',
                       complexity: 'medium',
                       comment: 'Тренд на AI, можно брать хорошие деньги'
                   },
                   {
                       name: 'Система онлайн-записи',
                       type: 'webapp',
                       description: 'Запись к мастеру (барбер, маникюр) через бот и сайт',
                       priority: 'high',
                       complexity: 'high',
                       comment: 'Много салонов красоты, постоянный спрос'
                   },
                   {
                       name: 'Викторина для бизнеса',
                       type: 'vk',
                       description: 'Интерактивная викторина с призами для привлечения клиентов',
                       priority: 'medium',
                       complexity: 'low',
                       comment: 'Простая в реализации, подходит многим'
                   },
                   {
                       name: 'Квиз-лендинг с расчётом',
                       type: 'landing',
                       description: 'Квиз для расчёта стоимости услуг с лидформой',
                       priority: 'medium',
                       complexity: 'medium',
                       comment: 'Высокая конверсия, подходит для услуг'
                   }
               ];

               defaultIdeas.forEach(idea => {
                   db.addRecord('ideas', idea);
               });
               db.loadIdeasData();
           }
       });

       // Плавная анимация при скролле
       document.addEventListener('scroll', function() {
           const cards = document.querySelectorAll('.metric-card');
           cards.forEach(card => {
               const rect = card.getBoundingClientRect();
               const isVisible = rect.top < window.innerHeight && rect.bottom > 0;
               
               if (isVisible) {
                   card.style.transform = 'translateY(0)';
                   card.style.opacity = '1';
               }
           });
       });

       // Улучшенная анимация прогресс-баров
       function animateProgressBar(element, targetWidth) {
           let currentWidth = 0;
           const increment = targetWidth / 50;
           
           const animation = setInterval(() => {
               currentWidth += increment;
               if (currentWidth >= targetWidth) {
                   currentWidth = targetWidth;
                   clearInterval(animation);
               }
               element.style.width = currentWidth + '%';
           }, 20);
       }

       // Обновляем прогресс-бары с анимацией
       const originalUpdateProgress = db.updateProgress;
       db.updateProgress = function() {
           const checkboxes = document.querySelectorAll('#planTableBody .status-checkbox');
           const completed = Array.from(checkboxes).filter(cb => cb.checked).length;
           const total = checkboxes.length;
           const percentage = total > 0 ? Math.round((completed / total) * 100) : 0;
           
           document.getElementById('completedTasks').textContent = completed;
           animateProgressBar(document.getElementById('tasksProgress'), percentage);
           
           this.updateWeekProgress();
       };
   </script>
</body>
</html>
